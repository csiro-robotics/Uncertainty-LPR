After installing environment through conda, head to MinkLoc dir, check python path, and set python path:

echo $PYTHONPATH
export PYTHONPATH=$PYTHONPATH:/home/gra595/projects/uncertainty_placerecognition/MinkLoc3D


---------------------------------


To train models on MinkLoc3D backbone:

cd training
python train.py --config ../config/config_baseline.txt --model_config ../models/minkloc3d.txt


---------------------------------


To evaluate models on MinkLoc3D, noting the only changes to this code were normalising the vector embeddings and printing out the length of correct and incorrect vectors as the script ran:

cd eval
python evaluate.py --config ../config/config_baseline.txt --model_config ../models/minkloc3d.txt --weights ../weights/minkloc3d_baseline.pth


---------------------------------
----- Evaluate an Ensemble ------
---------------------------------


To evaluate an ensemble of N numbers and save their cosine similarity to eval/cosinesim_dict.txt. 
Edit line 190 to save either mean or variance.
Every model must have same base naming convention. eg. model1.pth, model2.pth, model3.pth etc.
To evaluate N = 10 models in an ensemble:

cd eval
python evaluate_ensemble.py --config ../config/config_baseline.txt --model_config ../models/minkloc3d.txt --save_cosinesim True --model ../weights/model --num_models 10


---------------------------------
---- Plot Ensemble Findings -----
---------------------------------


First, ensure eval/cosinesim_dict.txt and pics/ exists. 
(change cosine_dict_variance.txt or cosine_dict_mean.txt to cosinesim_dict.txt for script to read similarities)
 
To plot recall as # of models increases:

python plot_ensemble.py --plot_ensemble_recall True

To plot histograms of cosine similarities separated by correct and incorrect predictions for all datasets, both normalised densities and unnormalised raw counts:

python plot_ensemble.py --plot_cosinesim_histograms True

To plot ROC curves for similarity separation and plot AUROC scores as # of models increases:

python plot_ensemble.py --plot_cosinesim_roc True

 
